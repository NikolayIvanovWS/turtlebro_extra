# Пакет робота поисковика turtlebro_searcher для робота TurtleBro

Пакет предназначен для работы робота TurtleBro.

С этим пакетом возможна работа робота в одном режиме:
* Робот публикует в топик aruco_marker текст привязанный к точкам патрулирования, а также в случае нахождения в этих точках Aruco-маркеров, добавляет в  топик aruco_marker текст, привязанный к ID-маркера.

## Установка пакета

Пакет входит в сборку метапакета `turtlebro_extra` и устанавливается автоматически при установке этого пакета. Для установки метапакета на роботе выполните команды:

```
cd ~/catkin_ws/src
git clone https://github.com/voltbro/turtlebro_extra
cd ../
catkin_make
```

### Настройка пакета

Для настроек точек патрулирования и текста при распозновании Aruco-маркеров используются следующие файлы:

1. Файл с описанием точек патрулирования ```data/goals.toml```, также файл дополнен фразами для публикации в точках патрулирования.

2. Файл с описанием Aruco-маркеров ```data/aruco_text.toml```

### Запуск пакета

Запуск ноды патрулирования и режима, в которой робот считывает и публикует Aruco-маркеры:
```
roslaunch turtlebro_searcher searcher_aruco.launch
```

Для отладки, возможно запускать пакет в режиме эмуляции патрулирования:
```
roslaunch turtlebro_searcher searcher.launch fake_move_base:=true
```

### Запуск пакета поисковика

Пакет наследует функции патрулирования ```turtlebro_patrol```. Для начала движения робота необходимо вызвать сервис ```/patrol_control```:

```
rosservice call /patrol_control "command: 'start'"
```

Для остановки работы пакета и движения робота необходимо вызвать сервис ```/patrol_control```:

```
rosservice call /patrol_control "command: 'shutdown'"
```
