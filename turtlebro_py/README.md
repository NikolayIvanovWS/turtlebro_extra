# Пакет предназначен для работы с роботом Turtlebro напрямую из Python

## Установка пакета

Пакет входит в сборку метапакета `turtlebro_extra` и устанавливается автоматически при установке этого пакета. Для установки метапакета на роботе выполните команды:

```
cd ~/catkin_ws/src
git clone https://github.com/voltbro/turtlebro_extra
cd ../
catkin_make --pkg=turtlebro_extra
```

### Использование библиотеки команд

Для работы с роботом импортируйте библиотеку Turtlebro в Python, при помощи команды
``` 
import turtlebro_py as tb
```

Для движения робота вперед используйте команду `move`, указав в качестве аргумента количество метров на которое вы хотите переместить робота:

```
tb.move(0.7)  #робот проедет вперед 0.7 метра
```
Опционально,вторым аргументом вы можете указать скорость в м/с с которой должен двигаться робот:
```
tb.move(0.5, 0.1)  #робот проедет вперед 0.5 метра со скоростью 0.1 м/с
```

Для поворота робота используйте команду `turn`, указав в качестве аргумента количество градусов на которое вы хотите повернуть робота
(Положительное число градусов повернет робота против часовой стрелки т.е. налево, отрицательное число градусов повернет робота по часовой стрелке, т.е. направо.):

```
tb.turn(90)  #робот повернется против часовой стрелки на 90 градусов
```
Опционально,вторым аргументом вы можете указать скорость в градусах/с с которой должен поворачиваться робот:
```
tb.turn(-45, 20)  #робот повернется по часовой стрелки на 90 градусов со скоростью 20 градусов/с
```

Для включения светодиодов на роботе используйте команду `color`, указав в качестве аргумента цвет светодиодов (red, green, yellow, blue, white):

```
tb.color("green")  #робот зажжет зеленые светодиоды
tb.color("red")  #робот зажжет красные светодиоды
tb.color("off")  #робот выключит светодиоды
```

Для определения расстояния до препятствия перед роботом используйте команду `distance`,
```
dist = tb.distance() #Расстояние до препятствия "перед" роботом.
```
Для определения расстояния до препятствия находящегося на определенном углу, используйте команду `distance` с аргументом равным градусу по которому вы хотите получить расстояние до препятствия:
```
dist = tb.distance(90) #Расстояние до препятствия "слева" от робота.
```
Опционально, вы можете указать аргумент = 360 для команды, тогда она вернет массив из 360 точек (по одной на градус) расстояний до препятствий вокруг робота.
```
ranges = []
ranges = tb.distance(360)
```

Для получения изображения с камеры робота используйте команду `photo`:
```
tb.photo() #Робот сохранит изображение в файл /home/pi/robophoto.jpg.
```
Опционально, вы можете указать имя файла в который надо сохранить изображение.

```
tb.photo("myphoto")
```

Для записи звука с камеры робота используйте команду `record`:
```
tb.record() #Робот сохранит 3-секунды записанного звука в файл /home/pi/turtlebro_sound.ogg
```
Опционально, вы можете указать время в течение которого записывать звук, а также имя файла в который надо сохранить запись 

```
tb.record(10, "mysound") #Робот будет записывать звук 10 секунд, и затем сохранит это в файл /home/pi/mysound.ogg
```

Для воспроизведения голосом какого-то текста из динамиков робота используйте команду `say`:
```
tb.say("Однажды в студёную зимнюю пору...") #Робот воспроизведет фрагмент стихотворения Н.А.Никрасова
```


Для вызова написанной вами функции при нажатии на кнопку 24 используйте команду `call`:
```
def myfunc():
    print("Hello from my function")

tb.call(myfunc) #при нажатии на кнопку 24, вызовется функция myfunc
```
Опционально, вы можете привязать по одной функции на каждую кнопку 22,23,24,25, для этого вызовите команду `call` с параметрами (имя_функции, номер_кнопки)

```
def myfunc1():
    print("Hello from my function1")

def myfunc2():
    print("Hello from my function2")

tb.call(myfunc1, 24) #при нажатии на кнопку 24, вызовется функция myfunc1
tb.call(myfunc1, 25) #при нажатии на кнопку 25, вызовется функция myfunc2
```

Пример кода для езды по квадрату длиной 20 см, со скоростью 0.1 м/с и смены цвета диодов на каждой стороне квадрата:

```
import turtlebro_py as tb

tb.color("green")
tb.move(0.2, 0.1)
tb.turn(90)

tb.color("red")
tb.move(0.2, 0.1)
tb.turn(90)

tb.color("yellow")
tb.move(0.2, 0.1)
tb.turn(90)

tb.color("blue")
tb.move(0.2, 0.1)
tb.turn(90)
```
